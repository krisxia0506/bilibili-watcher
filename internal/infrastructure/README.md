# Infrastructure Layer

基础设施层负责提供技术能力来支持上层（应用层和领域层）。它包含了与外部系统、框架和工具交互的所有代码。

## 主要职责

*   实现领域层定义的接口（例如，仓库接口）。
*   实现应用层定义的接口（例如，外部服务调用接口，如 `VideoProgressFetcher`）。
*   封装与具体技术相关的实现细节，例如：
    *   数据库访问（使用 ORM 如 GORM，或直接 SQL）。
    *   外部 API 客户端（如调用 Bilibili API）。
    *   消息队列的生产者和消费者。
    *   文件系统操作。
    *   缓存实现。
    *   Web 框架适配（HTTP handlers/controllers, 路由定义）。
    *   定时任务调度器。
*   处理数据的转换，例如将数据库模型映射到领域对象（在仓库实现中），或将外部 API 响应映射到应用层定义的数据结构（在 Fetcher 实现中）。

## 子目录

*   `bilibili/`: Bilibili API 客户端和应用层 Fetcher 接口的实现。
*   `persistence/`: 数据持久化相关实现，包括 GORM 数据库连接和仓库接口实现。
*   `scheduler/`: 定时任务调度器的实现。
*   `web/`: (目前为空) Web 框架适配相关代码，如 Gin handlers 和路由。

## 注意

*   基础设施层依赖于应用层和领域层（主要是实现它们定义的接口）。
*   领域逻辑**不应该**泄漏到基础设施层。
*   应尽量将基础设施层的具体实现细节与上层解耦。 