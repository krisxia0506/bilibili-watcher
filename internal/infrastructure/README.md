# Infrastructure Layer (`internal/infrastructure`)

基础设施层负责实现应用层和领域层定义的接口，提供与外部系统和技术细节交互的能力。

## 主要职责

*   实现领域层定义的仓库接口（例如，使用 GORM 与数据库交互）。
*   实现应用层定义的外部服务接口（例如，调用 Bilibili API 的 `BilibiliClient` 接口）。
*   处理具体的技术细节，如数据库连接、HTTP 请求、定时任务调度等。
*   将基础设施特定的数据结构（如数据库行、API 响应）与领域模型或应用层 DTO 进行转换。

## 子目录

*   `bilibili/`: 包含与 Bilibili API 交互的具体实现 (`BilibiliClient` 接口的实现)。
*   `persistence/`: 包含数据持久化的具体实现 (`VideoProgressRepository` 接口的 GORM 实现)。
*   `scheduler/`: 包含通用的定时任务调度器实现。

## 关键原则

*   **依赖倒置**: 实现了上层（应用层、领域层）定义的接口。
*   **技术细节封装**: 将具体的技术实现细节封装在此层，使上层保持稳定。
*   **数据映射**: 负责在基础设施数据格式和上层所需的数据格式（领域模型、DTO）之间进行转换。

## 注意

*   基础设施层依赖于应用层和领域层（主要是实现它们定义的接口）。
*   领域逻辑**不应该**泄漏到基础设施层。
*   应尽量将基础设施层的具体实现细节与上层解耦。 